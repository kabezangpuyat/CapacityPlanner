<!DOCTYPE html>
<html lang="en">
<head>
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta charset="utf-8" />
    <title>@ViewBag.Title</title>

    <meta name="description" content="3 styles with inline editable feature" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0" />

    <!-- bootstrap & fontawesome -->
    <link rel="stylesheet" href="@Url.Content("~/assets/css/bootstrap.min.css")" />
    <link rel="stylesheet" href="@Url.Content("~/assets/font-awesome/4.5.0/css/font-awesome.min.css")" />

    <!-- page specific plugin styles -->
    @RenderSection("specificPluginStyles", required: false)
    <!-- text fonts -->
    <link rel="stylesheet" href="@Url.Content("~/assets/css/fonts.googleapis.com.css")" />

    <!-- ace styles -->
    <link rel="stylesheet" href="@Url.Content("~/assets/css/ace.min.css")" class="ace-main-stylesheet" id="main-ace-style" />

    <!--[if lte IE 9]>
        <link rel="stylesheet" href="assets/css/ace-part2.min.css" class="ace-main-stylesheet" />
    <![endif]-->
    <link rel="stylesheet" href="@Url.Content("~/assets/css/ace-skins.min.css")" />
    <link rel="stylesheet" href="@Url.Content("~/assets/css/ace-rtl.min.css")" />

    <!--[if lte IE 9]>
      <link rel="stylesheet" href="assets/css/ace-ie.min.css" />
    <![endif]-->
    <!-- inline styles related to this page -->
    <!-- ace settings handler -->
    <script src="@Url.Content("~/assets/js/ace-extra.min.js")"></script>

    <!-- HTML5shiv and Respond.js for IE8 to support HTML5 elements and media queries -->
    <!--[if lte IE 8]>
    <script src="assets/js/html5shiv.min.js"></script>
    <script src="assets/js/respond.min.js"></script>
    <![endif]-->
    <link rel="stylesheet" href="@Url.Content("~/assets/css/jquery-confirm.css")" />
    @RenderSection("styles", required: false)
</head>

<body class="no-skin">
	@{ Html.RenderPartial("~/Views/Shared/_acenavbar.cshtml");}


    @using (Html.BeginForm("LogOff", "Account", FormMethod.Post, new { id = "logoutForm", }))
    {@Html.AntiForgeryToken()}
    <div class="main-container ace-save-state" id="main-container">
        <script type="text/javascript">
            try { ace.settings.loadState('main-container') } catch (e) { }
        </script>

        <div id="sidebar" class="sidebar                  responsive                    ace-save-state">
            <script type="text/javascript">
                try { ace.settings.loadState('sidebar') } catch (e) { }
            </script>

            @Html.Action("_NavigationList", "Common")
            @*@{ Html.RenderPartial("_Navigations"); }*@


            <div class="sidebar-toggle sidebar-collapse" id="sidebar-collapse">
                <i id="sidebar-toggle-icon" class="ace-icon fa fa-angle-double-left ace-save-state" data-icon1="ace-icon fa fa-angle-double-left" data-icon2="ace-icon fa fa-angle-double-right"></i>
            </div>
        </div>

        <div class="main-content">
            <div class="main-content-inner">
                <div class="breadcrumbs ace-save-state" id="breadcrumbs">
                    <ul class="breadcrumb">
                        @{
                            var pages = Request.Url.LocalPath.Split('/').ToArray();
                        }
                        @for (var i = 1; i < pages.Count(); i++)
                        {

                            if (!string.IsNullOrEmpty(pages[i]))
                            {
                                if ((pages.Count() - 1) == i)
                                {
                                    <li class="active">@pages[i]</li>
                                }
                                else
                                {
                                    <li>
                                        <i class="ace-icon fa fa-home home-icon"></i>
                                        <a href="#">@pages[i]</a>
                                    </li>
                                }
                            }
                        }
                    </ul><!-- /.breadcrumb -->

                    <div class="nav-search" id="nav-search">
                        <form class="form-search">
                            <span class="input-icon" style="display:none;">
                                <input type="text" placeholder="Search ..." class="nav-search-input" id="nav-search-input" autocomplete="off" />
                                <i class="ace-icon fa fa-search nav-search-icon"></i>
                            </span>
                        </form>
                    </div><!-- /.nav-search -->
                </div>

                <div class="page-content">
                    <div class="ace-settings-container" id="ace-settings-container">
                       
                        <div class="ace-settings-box clearfix" id="ace-settings-box">
                            <div class="pull-left width-50">
                                <div class="ace-settings-item">
                                    <div class="pull-left">
                                        <select id="skin-colorpicker" class="hide">
                                            <option data-skin="no-skin" value="#438EB9">#438EB9</option>
                                            <option data-skin="skin-1" value="#222A2D">#222A2D</option>
                                            <option data-skin="skin-2" value="#C6487E">#C6487E</option>
                                            <option data-skin="skin-3" value="#D0D0D0">#D0D0D0</option>
                                        </select>
                                    </div>
                                    <span>&nbsp; Choose Skin</span>
                                </div>

                                <div class="ace-settings-item">
                                    <input type="checkbox" class="ace ace-checkbox-2 ace-save-state" id="ace-settings-navbar" autocomplete="off" />
                                    <label class="lbl" for="ace-settings-navbar"> Fixed Navbar</label>
                                </div>

                                <div class="ace-settings-item">
                                    <input type="checkbox" class="ace ace-checkbox-2 ace-save-state" id="ace-settings-sidebar" autocomplete="off" />
                                    <label class="lbl" for="ace-settings-sidebar"> Fixed Sidebar</label>
                                </div>

                                <div class="ace-settings-item">
                                    <input type="checkbox" class="ace ace-checkbox-2 ace-save-state" id="ace-settings-breadcrumbs" autocomplete="off" />
                                    <label class="lbl" for="ace-settings-breadcrumbs"> Fixed Breadcrumbs</label>
                                </div>

                                <div class="ace-settings-item">
                                    <input type="checkbox" class="ace ace-checkbox-2" id="ace-settings-rtl" autocomplete="off" />
                                    <label class="lbl" for="ace-settings-rtl"> Right To Left (rtl)</label>
                                </div>

                                <div class="ace-settings-item">
                                    <input type="checkbox" class="ace ace-checkbox-2 ace-save-state" id="ace-settings-add-container" autocomplete="off" />
                                    <label class="lbl" for="ace-settings-add-container">
                                        Inside
                                        <b>.container</b>
                                    </label>
                                </div>
                            </div><!-- /.pull-left -->

                            <div class="pull-left width-50">
                                <div class="ace-settings-item">
                                    <input type="checkbox" class="ace ace-checkbox-2" id="ace-settings-hover" autocomplete="off" />
                                    <label class="lbl" for="ace-settings-hover"> Submenu on Hover</label>
                                </div>

                                <div class="ace-settings-item">
                                    <input type="checkbox" class="ace ace-checkbox-2" id="ace-settings-compact" autocomplete="off" />
                                    <label class="lbl" for="ace-settings-compact"> Compact Sidebar</label>
                                </div>

                                <div class="ace-settings-item">
                                    <input type="checkbox" class="ace ace-checkbox-2" id="ace-settings-highlight" autocomplete="off" />
                                    <label class="lbl" for="ace-settings-highlight"> Alt. Active Item</label>
                                </div>
                            </div><!-- /.pull-left -->
                        </div><!-- /.ace-settings-box -->
                    </div><!-- /.ace-settings-container -->
					@Html.Action("_ErlangCCalculator", "Common")
                    <div id="wrapper" ng-cloak>
                        <div id="toufiqElahy">
                            @RenderBody()
                        </div>
                    </div>
                    

                </div><!-- /.page-content -->
            </div>
        </div><!-- /.main-content -->

        <div class="footer">
            <div class="footer-inner">
                <div class="footer-content">
                    <span class="bigger-110">
                        <span class="blue bolder">WFM PCP</span>
                        <span style="font-size:12px;"> &copy; Powered by <strong>Corporate Applications</strong></span>
                    </span>

                    &nbsp; &nbsp;
                    <span class="action-buttons">
                        <a href="#" style="display:none;">
                            <i class="ace-icon fa fa-twitter-square light-blue bigger-150"></i>
                        </a>

                        <a href="#" style="display:none;">
                            <i class="ace-icon fa fa-facebook-square text-primary bigger-150"></i>
                        </a>

                        <a href="#" style="display:none;">
                            <i class="ace-icon fa fa-rss-square orange bigger-150"></i>
                        </a>
                    </span>
                </div>
            </div>
        </div>

        <a href="#" id="btn-scroll-up" class="btn-scroll-up btn btn-sm btn-inverse">
            <i class="ace-icon fa fa-angle-double-up icon-only bigger-110"></i>
        </a>
    </div><!-- /.main-container -->
    <!-- basic scripts -->
    <!--[if !IE]> -->
    <script src="@Url.Content("~/assets/js/jquery-2.1.4.min.js")"></script>

    <!-- <![endif]-->
    <!--[if IE]>
     <script src="@Url.Content("~/assets/js/jquery-1.11.3.min.js")"></script>
     <![endif]-->

    <script type="text/javascript">
        if('ontouchstart' in document.documentElement) document.write("<script src='@Url.Content("~/assets/js/jquery.mobile.custom.min.js")'>"+"<"+"/script>");
    </script>
    <script src="@Url.Content("~/assets/js/bootstrap.min.js")"></script>

    <!-- page specific plugin scripts -->
    <script src="@Url.Content("~/assets/js/jquery-confirm.js")"></script>
    @RenderSection("specificScripts", required: false)
	<script src="@Url.Content("~/assets/js/jquery-ui.custom.min.js")"></script>
	<script src="@Url.Content("~/assets/js/jquery.easypiechart.min.js")"></script>
	<script src="@Url.Content("~/assets/js/jquery.sparkline.index.min.js")"></script>
	<script src="@Url.Content("~/assets/js/jquery.flot.min.js")"></script>
	<script src="@Url.Content("~/assets/js/jquery.flot.pie.min.js")"></script>
	<script src="@Url.Content("~/assets/js/jquery.flot.resize.min.js")"></script>

    <!--[if lte IE 8]>
      <script src="assets/js/excanvas.min.js"></script>
    <![endif]-->

    <!-- ace scripts -->
    <script src="@Url.Content("~/assets/js/ace-elements.min.js")"></script>
    <script src="@Url.Content("~/assets/js/ace.min.js")"></script>
    <script src="@Url.Content("~/Scripts/Common.js")"></script>
    @RenderSection("scripts", required: false)
    @*<link href="@Url.Content("~/assets/SPA/toufiqElahySPA.css")" rel="stylesheet" />
    <script src="@Url.Content("~/assets/SPA/toufiqElahySPA_alertRemoved.js")"></script>*@
	<script type="text/javascript">

		jQuery(function ($) {
			$('.easy-pie-chart.percentage').each(function () {
				var $box = $(this).closest('.infobox');
				var barColor = $(this).data('color') || (!$box.hasClass('infobox-dark') ? $box.css('color') : 'rgba(255,255,255,0.95)');
				var trackColor = barColor == 'rgba(255,255,255,0.95)' ? 'rgba(255,255,255,0.25)' : '#E2E2E2';
				var size = parseInt($(this).data('size')) || 50;
				$(this).easyPieChart({
					barColor: barColor,
					trackColor: trackColor,
					scaleColor: false,
					lineCap: 'butt',
					lineWidth: parseInt(size / 10),
					animate: ace.vars['old_ie'] ? false : 1000,
					size: size
				});
			})

			$('.sparkline').each(function () {
				var $box = $(this).closest('.infobox');
				var barColor = !$box.hasClass('infobox-dark') ? $box.css('color') : '#FFF';
				$(this).sparkline('html',
								 {
								 	tagValuesAttribute: 'data-values',
								 	type: 'bar',
								 	barColor: barColor,
								 	chartRangeMin: $(this).data('min') || 0
								 });
			});
		});

        //$('#txtNumberofcalls').focus();

		$('#btnCompute').click(function (data) {
			var callsPerHour = $.trim($('#txtNumberofcalls').val());
			var ahtInsecs = $.trim($('#txtAHTInSeconds').val());
			var requiredSL = $.trim($('#txtRequiredServiceLevel').val());
			var targetAnswerTime = $.trim($('#txtTargetAnswerTimeInSecs').val());
			var shrinkage = $.trim($('#txtShrinkage').val());
			var msg = '';

			if (callsPerHour == '')
				msg += 'Number of calls is required. <br />';
			if (ahtInsecs == '')
				msg += 'AHT in seconds is required. <br />';
			if (requiredSL == '')
				msg += 'Required SL is required. <br />';
			if (targetAnswerTime == '')
				msg += 'Target Answer Time is required. <br />';
			if (shrinkage == '')
				msg += 'Shrinkage is required. <br />';

			if (msg == '') {
				var model = {
					numberOfCalls: callsPerHour,
					ahtInSeconds: ahtInsecs,
					requiredServiceLevel: requiredSL,
					targetAnswerTimeInSeconds: targetAnswerTime,
					shrinkage: shrinkage
				};
				var url = '@Url.Action("ComputeErlangC", "Common")';
				$.post(url, model, function (data) {

					if ($.trim(data.Message) != '') {
						ClearData(false);

						$.alert({
							closeIcon: true,
							title: 'WFMPCP | Erlang C Calculator',
							content: data.Message
						});
					}
					else {

						$('#sReqAgent').text(data.ErlangCViewModel.NumberOfAgentsRequired);
						$('#divReqAgent').data('easyPieChart').update(data.ErlangCViewModel.NumberOfAgentsRequired);

						$('#sSL').text(common.Round(data.ErlangCViewModel.ServiceLevelPerc, 1));
						$('#divSL').data('easyPieChart').update(data.ErlangCViewModel.ServiceLevelPerc);

						$('#sCallToWait').text(common.Round(data.ErlangCViewModel.PwErlangPerc, 1));
						$('#divCallToWait').data('easyPieChart').update(data.ErlangCViewModel.PwErlangPerc);

						$('#sASA').text(common.Round(data.ErlangCViewModel.ASA, 1));
						$('#divASA').data('easyPieChart').update(data.ErlangCViewModel.ASA);

						$('#sIA').text(common.Round(data.ErlangCViewModel.ImmediateAnswerPerc, 1));
						$('#divIA').data('easyPieChart').update(data.ErlangCViewModel.ImmediateAnswerPerc);

						$('#sOccupancy').text(common.Round(data.ErlangCViewModel.OccupancyPerc, 1));
						$('#divOccupancy').data('easyPieChart').update(data.ErlangCViewModel.OccupancyPerc);
					}

				}, 'json');
			}
			else {
				$.alert({
					closeIcon: true,
					title: 'WFMPCP | Erlang C Calculator',
					content: msg
				});
			}

		});

		$('#btnClear').click(function () {
			ClearData(true);
		});

		function ClearData(includeTexbox) {
			if (includeTexbox) {
				$('#txtNumberofcalls').val('').focus();
				$('#txtAHTInSeconds').val('');
				$('#txtRequiredServiceLevel').val('');
				$('#txtTargetAnswerTimeInSecs').val('');
				$('#txtShrinkage').val('');
			};
			$('#sReqAgent').text(0);
			$('#divReqAgent').data('easyPieChart').update(0);

			$('#sSL').text(0);
			$('#divSL').data('easyPieChart').update(0);

			$('#sCallToWait').text(0);
			$('#divCallToWait').data('easyPieChart').update(0);

			$('#sASA').text(0);
			$('#divASA').data('easyPieChart').update(0);

			$('#sIA').text(0);
			$('#divIA').data('easyPieChart').update(0);

			$('#sOccupancy').text(0);
			$('#divOccupancy').data('easyPieChart').update(0);
		}
	</script>
</body>
</html>
